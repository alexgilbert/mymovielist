(function(){var e;e=function(){function e(e,t,r,o,n,i,a){this.name=e,this.baseRequestForFilter=t,this.baseLinkForShowAllRecords=r,this.linkForExport=o,this.parameterNameForQueryLoading=n,this.parameterNameForFocus=i,this.environment=a,this.filterDeclarations=new Array,this.checkIfJsFrameworkIsLoaded()}return e.prototype.checkIfJsFrameworkIsLoaded=function(){return jQuery?void 0:alert("jQuery not loaded, WiceGrid cannot proceed!")},e.prototype.toString=function(){return"<WiceGridProcessor instance for grid '"+this.name+"'>"},e.prototype.process=function(e){return window.location=this.buildUrlWithParams(e)},e.prototype.setProcessTimer=function(e){var t;return this.timer&&(clearTimeout(this.timer),this.timer=null),t=this,this.timer=setTimeout(function(){return t.process(e)},1e3)},e.prototype.reloadPageForGivenGridState=function(e){var t;return t=this.gridStateToRequest(e),window.location=this.appendToUrl(this.baseLinkForShowAllRecords,t)},e.prototype.gridStateToRequest=function(e){return jQuery.map(e,function(e){return encodeURIComponent(e[0])+"="+encodeURIComponent(e[1])}).join("&")},e.prototype.appendToUrl=function(e,t){var r;return r=-1!==e.indexOf("?")?/[&\?]$/.exec(e)?"":"&":"?",e+r+t},e.prototype.buildUrlWithParams=function(e){var t,r,o;return o=new Array,jQuery.each(this.filterDeclarations,function(e){return function(t,r){var n;return n=e.readValuesAndFormQueryString(r.filterName,r.detached,r.templates,r.ids),n&&""!==n?o.push(n):void 0}}(this)),r=this.baseRequestForFilter,0!==o.length&&(t=o.join("&"),r=this.appendToUrl(r,t)),e&&(r=this.appendToUrl(r,this.parameterNameForFocus+e)),r},e.prototype.reset=function(){return window.location=this.baseRequestForFilter},e.prototype.exportToCsv=function(){return window.location=this.linkForExport},e.prototype.register=function(e){return this.filterDeclarations.push(e)},e.prototype.readValuesAndFormQueryString=function(e,t,r,o){var n,i,a,s,u,c,d,p,h,l;for(u=new Array,i=d=0,h=r.length-1;h>=0?h>=d:d>=h;i=h>=0?++d:--d){if(null===$(o[i]))return"development"===this.environment&&(s='WiceGrid: Error reading state of filter "'+e+'". No DOM element with id "'+o[i]+'" found.',t&&(s+='You have declared "'+e+'" as a detached filter but have not output it anywhere in the template. Read documentation about detached filters.'),alert(s)),"";if(n=$("#"+o[i]),n[0]&&"checkbox"===n[0].type?n[0].checked&&(c=1):c=n.val(),c instanceof Array)for(a=p=0,l=c.length-1;l>=0?l>=p:p>=l;a=l>=0?++p:--p)c[a]&&""!==c[a]&&u.push(r[i]+encodeURIComponent(c[a]));else c&&""!==c&&u.push(r[i]+encodeURIComponent(c))}return u.join("&")},e}(),e._version="3.2",window.WiceGridProcessor=e}).call(this);